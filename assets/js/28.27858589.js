(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{502:function(s,t,a){"use strict";a.r(t);var n=a(26),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"core-modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#core-modules"}},[s._v("#")]),s._v(" core modules")]),s._v(" "),a("h3",{attrs:{id:"intro"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#intro"}},[s._v("#")]),s._v(" Intro")]),s._v(" "),a("p",[s._v("The core modules are defined within Node.js's source and are located in the lib/ folder.")]),s._v(" "),a("p",[s._v("Core modules are always preferentially loaded if their identifier is passed to require(). For instance, require('http') will always return the built in HTTP module, even if there is a file by that name.")]),s._v(" "),a("h3",{attrs:{id:"important-core-modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#important-core-modules"}},[s._v("#")]),s._v(" Important core modules")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("core modules")]),s._v(" "),a("th",[s._v("describe")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("HTTP")]),s._v(" "),a("td",[s._v("http 模块包括创建 Node.js http 服务器的类，方法和事件")])]),s._v(" "),a("tr",[a("td",[s._v("URL")]),s._v(" "),a("td",[s._v("url 模块包括用于 URL 解析和解析的方法")])]),s._v(" "),a("tr",[a("td",[s._v("Query Strings")]),s._v(" "),a("td",[s._v("querystring 模块包括处理查询字符串的方法")])]),s._v(" "),a("tr",[a("td",[s._v("PATH")]),s._v(" "),a("td",[s._v("路径模块包括处理文件路径的方法")])]),s._v(" "),a("tr",[a("td",[s._v("FS")]),s._v(" "),a("td",[s._v("模块包括用于处理文件 I / O 的类，方法和事件")])]),s._v(" "),a("tr",[a("td",[s._v("UTIL")]),s._v(" "),a("td",[s._v("util 模块包括对程序员有用的实用函数。")])]),s._v(" "),a("tr",[a("td",[s._v("...")]),s._v(" "),a("td",[s._v("...")])])])]),s._v(" "),a("h2",{attrs:{id:"modules-types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modules-types"}},[s._v("#")]),s._v(" modules types")]),s._v(" "),a("ol",[a("li",[s._v("具名的核心模块")])]),s._v(" "),a("p",[s._v("eg: fs http")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("custom file modules(路径形式的模块)")])]),s._v(" "),a("div",{staticClass:"language-js {.line-numbers} line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\wx\\nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("type hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello.js start'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./test01.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello.js end'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\wx\\nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("type test01"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'I am a newcomer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\wx\\nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("node Hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\nhello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js start\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("I")]),s._v(" am a newcomer\nhello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js end\n\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\wx\\nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("第三方模块")])]),s._v(" "),a("h2",{attrs:{id:"scope"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scope"}},[s._v("#")]),s._v(" scope")]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("node")]),s._v("中只有模块作用域，没有全局作用域")]),s._v(" "),a("p",[a("code",[s._v("require js")]),s._v("文件时可以舍去"),a("code",[s._v(".js")]),s._v("，"),a("code",[s._v('require("./package.js")')]),s._v("等价于"),a("code",[s._v('require("./package")')])]),s._v(" "),a("p",[a("code",[s._v("require")]),s._v("的主要作用:")]),s._v(" "),a("ol",[a("li",[s._v("加载模块并执行模块中的代码;")]),s._v(" "),a("li",[s._v("返回 "),a("code",[s._v("exports")]),s._v(" 对象;")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("所有模块都有一个"),a("code",[s._v("exports")]),s._v("对象，默认值是一个空对象"),a("code",[s._v("{}")]),s._v(";可以给 exports 对象添加属性;")])]),s._v(" "),a("div",{staticClass:"language-js {.line-numbers} line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\wx\\nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("type hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./test01.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'foo:'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\wx\\nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("type test01"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'c'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\wx\\nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("node Hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\nfoo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("a\n\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\wx\\nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("div",{staticClass:"language-js {.line-numbers} line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\wx\\nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("type a\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" s "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./b'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\wx\\nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("type b\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("y")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Mount sum to exports object */")]),s._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\wx\\nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("node a\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\wx\\nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"exports-和-module-的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exports-和-module-的区别"}},[s._v("#")]),s._v(" exports 和 module 的区别")]),s._v(" "),a("p",[s._v("每个模块中都有一个 "),a("code",[s._v("module")]),s._v(" 对象, "),a("code",[s._v("module")]),s._v(" 对象中有一个 "),a("code",[s._v("exports")]),s._v(" 属性。我们可以把需要导出的成员都挂载到 "),a("code",[s._v("module.exports")]),s._v(" 接口对象中也就是 "),a("code",[s._v("moudle.exports.xxx = xxx")]),s._v(" 的方式，但是每次都 "),a("code",[s._v("moudle.exports.xxx = xxx")]),s._v(" 很麻烦，点儿的太多了，所以 Node 为了方便，同时在每一个模块中都提供了一个成员叫："),a("code",[s._v("exports")]),s._v("."),a("br"),s._v(" "),a("code",[s._v("exports === module.exports")]),s._v(" 结果为 "),a("code",[s._v("true")]),s._v("所以对于："),a("code",[s._v("moudle.exports.xxx = xxx")]),s._v(" 的方式完全可以用"),a("code",[s._v("expots.xxx = xxx")]),s._v(" 代替。")]),s._v(" "),a("p",[s._v("当一个模块需要导出单个成员的时候，这个时候必须使用："),a("code",[s._v("module.exports = xxx")]),s._v(" 的方式\n不要使用 "),a("code",[s._v("exports = xxx")]),s._v(" 不管用\n因为每个模块最终向外 "),a("code",[s._v("return")]),s._v(" 的是 "),a("code",[s._v("module.exports")]),s._v("\n而 "),a("code",[s._v("exports")]),s._v(" 只是 "),a("code",[s._v("module.exports")]),s._v(" 的一个引用\n所以即便你为 "),a("code",[s._v("exports = xx")]),s._v(" 重新赋值，也不会影响 "),a("code",[s._v("module.exports")]),s._v("\n但是有一种赋值方式比较特殊："),a("code",[s._v("exports = module.exports")]),s._v(" 这个用来重新建立引用关系的")]),s._v(" "),a("p",[s._v("如果一个模块需要直接导出某个成员，而非挂载的方式，\n"),a("code",[s._v("module.exports = sum")]),s._v(", 不能使用 "),a("code",[s._v("exports = sum")]),s._v(" ，因为 每个模块最后 "),a("code",[s._v("return module.exports")])]),s._v(" "),a("p",[s._v("导出多个成员：")]),s._v(" "),a("div",{staticClass:"language-js {.line-numbers} line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("sum")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" y")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" y\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  str"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// exports 是 module.exports 的一个引用")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// exports.foo = 'abc'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 等价于")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// module.exports = 'abc'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"模块加载机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块加载机制"}},[s._v("#")]),s._v(" 模块加载机制")]),s._v(" "),a("p",[s._v("优先从缓存中加载，由于在 "),a("code",[s._v("a")]),s._v(" 中已经加载过 "),a("code",[s._v("b")]),s._v(" 了，所以这里不会重新加载，可以拿到其中的接口对象，但是不会重复执行里面的代码。\n这样做得目的：避免重复加载，提高模块加载效率")]),s._v(" "),a("div",{staticClass:"language-shell {.line-numbers} line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("type a.js\nconsole.log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a.js is loaded'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nvar foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./b'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole.log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\nC:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("type b.js\nconsole.log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'b.js is loaded'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule.exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console.log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nC:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("node a.js\na.js is loaded\nb.js is loaded\nhello world\nundefined\n\nC:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("nodeLearn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h3",{attrs:{id:"核心模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心模块"}},[s._v("#")]),s._v(" 核心模块")]),s._v(" "),a("div",{staticClass:"language-js {.line-numbers} line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 核心模块的本质也是文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 核心模块文件已经被编译到了二进制文件中了，只需要按照名字来加载就可以了")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"路径形式的文件模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路径形式的文件模块"}},[s._v("#")]),s._v(" 路径形式的文件模块")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("./")]),s._v(" 当前目录，不可省略")]),s._v(" "),a("li",[a("code",[s._v("../")]),s._v(" 上一级目录，不可省略")]),s._v(" "),a("li",[a("code",[s._v("/xxx")]),s._v(" 几乎不用")]),s._v(" "),a("li",[a("code",[s._v("d:/a/foo.js")]),s._v(" 几乎不用")]),s._v(" "),a("li",[s._v("首位的 "),a("code",[s._v("/")]),s._v(" 在这里表示的是当前文件模块所属磁盘根路径")]),s._v(" "),a("li",[a("code",[s._v(".js")]),s._v(" 后缀名可以省略")]),s._v(" "),a("li",[a("code",[s._v("require('./foo.js')")])])]),s._v(" "),a("h3",{attrs:{id:"第三方模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三方模块"}},[s._v("#")]),s._v(" 第三方模块")]),s._v(" "),a("p",[s._v("凡是第三方模块都必须通过 "),a("code",[s._v("npm")]),s._v(" 来下载\n使用的时候就可以通过 "),a("code",[s._v("require('包名')")]),s._v(" 的方式来进行加载才可以使用\n不可能有任何一个第三方包和核心模块的名字是一样的\n既不是核心模块、也不是路径形式的模块")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" template "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'art-template'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("先找到当前文件所处目录中的 "),a("code",[s._v("node_modules")]),s._v(" 目录\nnode_modules/art-template\nnode_modules/art-template/package.json 文件\nnode_modules/art-template/package.json 文件中的 main 属性\nmain 属性中就记录了 art-template 的入口模块\n然后加载使用这个第三方包\n实际上最终加载的还是文件")]),s._v(" "),a("p",[s._v("如果 "),a("code",[s._v("package.json")]),s._v(" 文件不存在或者 "),a("code",[s._v("main")]),s._v(" 指定的入口模块是也没有, 则 node 会自动找该目录下的 index.js. 也就是说 index.js 会作为一个默认备选项. 如果以上所有任何一个条件都不成立，则会进入上一级目录中的 node_modules 目录查找, 如果上一级还没有，则继续往上上一级查找。。。如果直到当前磁盘根目录还找不到，最后报错：\n"),a("code",[s._v("can not find module xxx")])]),s._v(" "),a("p",[s._v("注意：我们一个项目有且只有一个 "),a("code",[s._v("node_modules")]),s._v("，放在项目根目录中，这样的话项目中所有的子目录中的代码都可以加载到第三方包,不会出现有多个 "),a("code",[s._v("node_modules")])])])}),[],!1,null,null,null);t.default=e.exports}}]);