(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{594:function(t,e,s){"use strict";s.r(e);var v=s(26),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("ul",[s("li",[s("a",{attrs:{href:"https://tools.ietf.org/html/rfc7231#section-4",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC 7231, section 4: Request methods"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://tools.ietf.org/html/rfc5789#section-2",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC 5789, section 2: Patch method"),s("OutboundLink")],1)])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("HTTP method")]),t._v(" "),s("th",[t._v("RFC")]),t._v(" "),s("th",[t._v("Request has Body")]),t._v(" "),s("th",[t._v("Response has Body")]),t._v(" "),s("th",[t._v("Safe")]),t._v(" "),s("th",[t._v("Idempotent")]),t._v(" "),s("th",[t._v("Cacheable")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("GET")]),t._v(" "),s("td",[t._v("RFC 7231")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("Yes")])]),t._v(" "),s("tr",[s("td",[t._v("HEAD")]),t._v(" "),s("td",[t._v("RFC 7231")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("No")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("Yes")])]),t._v(" "),s("tr",[s("td",[t._v("POST")]),t._v(" "),s("td",[t._v("RFC 7231")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("No")]),t._v(" "),s("td",[t._v("No")]),t._v(" "),s("td",[t._v("Yes")])]),t._v(" "),s("tr",[s("td",[t._v("PUT")]),t._v(" "),s("td",[t._v("RFC 7231")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("No")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("No")])]),t._v(" "),s("tr",[s("td",[t._v("DELETE")]),t._v(" "),s("td",[t._v("RFC 7231")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("No")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("No")])]),t._v(" "),s("tr",[s("td",[t._v("CONNECT")]),t._v(" "),s("td",[t._v("RFC 7231")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("No")]),t._v(" "),s("td",[t._v("No")]),t._v(" "),s("td",[t._v("No")])]),t._v(" "),s("tr",[s("td",[t._v("OPTIONS")]),t._v(" "),s("td",[t._v("RFC 7231")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("No")])]),t._v(" "),s("tr",[s("td",[t._v("TRACE")]),t._v(" "),s("td",[t._v("RFC 7231")]),t._v(" "),s("td",[t._v("No")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("No")])]),t._v(" "),s("tr",[s("td",[t._v("PATCH")]),t._v(" "),s("td",[t._v("RFC 5789")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("No")]),t._v(" "),s("td",[t._v("No")]),t._v(" "),s("td",[t._v("No")])])])]),t._v(" "),s("hr"),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP request methods"),s("OutboundLink")],1)])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Method")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("GET")]),t._v(" "),s("td",[t._v("The GET method requests a representation of the specified resource. "),s("strong",[t._v("Requests using GET should only retrieve data.")])])]),t._v(" "),s("tr",[s("td",[t._v("HEAD")]),t._v(" "),s("td",[t._v("The HEAD method asks for a response identical to that of a GET request, but without the response body.")])]),t._v(" "),s("tr",[s("td",[t._v("POST")]),t._v(" "),s("td",[t._v("The POST method is used to submit an entity to the specified resource, often causing a change in state or side effects on the server.")])]),t._v(" "),s("tr",[s("td",[t._v("PUT")]),t._v(" "),s("td",[t._v("The PUT method replaces "),s("strong",[t._v("all current representations")]),t._v(" of the target resource with the request payload.")])]),t._v(" "),s("tr",[s("td",[t._v("DELETE")]),t._v(" "),s("td",[t._v("The DELETE method deletes the specified resource.")])]),t._v(" "),s("tr",[s("td",[t._v("CONNECT")]),t._v(" "),s("td",[t._v("The CONNECT method establishes a tunnel to the server identified by the target resource.")])]),t._v(" "),s("tr",[s("td",[t._v("OPTIONS")]),t._v(" "),s("td",[t._v("The OPTIONS method is used to describe the communication options for the target resource.")])]),t._v(" "),s("tr",[s("td",[t._v("TRACE")]),t._v(" "),s("td",[t._v("The TRACE method performs a message loop-back test along the path to the target resource.")])]),t._v(" "),s("tr",[s("td",[t._v("PATCH")]),t._v(" "),s("td",[t._v("The PATCH method is used to apply "),s("strong",[t._v("partial modifications")]),t._v(" to a resource.")])])])]),t._v(" "),s("h2",{attrs:{id:"为什么-patch-不是幂等的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么-patch-不是幂等的"}},[t._v("#")]),t._v(" 为什么 PATCH 不是幂等的")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://blog.csdn.net/miachen520/article/details/91039661",target:"_blank",rel:"noopener noreferrer"}},[t._v("什么是幂等性"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://baike.baidu.com/item/%E5%B9%82%E7%AD%89/8600688?fr=aladdin",target:"_blank",rel:"noopener noreferrer"}},[t._v("幂等"),s("OutboundLink")],1),t._v("（idempotent、idempotence）是一个数学与计算机学概念，常见于抽象代数中。")]),t._v(" "),s("p",[s("strong",[t._v("在编程中一个幂等操作的特点是其任意多次执行所产生的影响均与一次执行的影响相同。")]),t._v(" 幂等函数，或幂等方法，是指可以使用相同参数重复执行，并能获得相同结果的函数。这些函数不会影响系统状态，也不用担心重复执行会对系统造成改变。例如，"),s("code",[t._v("setTrue()")]),t._v("函数就是一个幂等函数,无论多次执行，其结果都是一样的.更复杂的操作幂等保证是利用唯一交易号(流水号)实现。")]),t._v(" "),s("p",[t._v("因为 "),s("code",[t._v("PATCH")]),t._v(" 只是部分更新。服务端很可能会做一些其他的操作。"),s("br"),t._v("\nNB: "),s("code",[t._v("PUT")]),t._v(" 是全部更新")]),t._v(" "),s("h2",{attrs:{id:"post-vs-put"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#post-vs-put"}},[t._v("#")]),t._v(" POST vs PUT")]),t._v(" "),s("p",[s("code",[t._v("POST")]),t._v(" 和 "),s("code",[t._v("PUT")]),t._v(" 的主要区别就是幂等性"),s("br"),t._v(" "),s("code",[t._v("POST")]),t._v(" 一般是新建对象。每次请求都会新建一个对象。 "),s("code",[t._v("PUT")]),t._v(" 每次请求都会替换掉原来的对象。")]),t._v(" "),s("p",[t._v("NB: 有时 "),s("code",[t._v("PUT")]),t._v(" 可能也会用来创建一个新的对象。"),s("br"),t._v("\nE.g: 如果存在就更新，不存在就创建。")]),t._v(" "),s("h2",{attrs:{id:"options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#options"}},[t._v("#")]),t._v(" OPTIONS")]),t._v(" "),s("ol",[s("li",[t._v("检测服务器所支持的请求方法")])]),t._v(" "),s("p",[t._v("可以使用 "),s("code",[t._v("OPTIONS")]),t._v(" 方法对服务器发起请求，以检测服务器支持哪些 HTTP 方法：")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X OPTIONS http://example.org -i\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("响应报文包含一个 "),s("code",[t._v("Allow")]),t._v(" 首部字段，该字段的值表明了服务器支持的所有 HTTP 方法：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("HTTP/1.1 200 OK\nAllow: OPTIONS, GET, HEAD, POST\nCache-Control: max-age=604800\nDate: Thu, 13 Oct 2016 11:45:00 GMT\nExpires: Thu, 20 Oct 2016 11:45:00 GMT\nServer: EOS (lax004/2813)\nx-ec-custom-error: 1\nContent-Length: 0\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("CORS 中的预检请求(Preflighted requests)")])]),t._v(" "),s("p",[t._v("在 CORS 中，可以使用 "),s("code",[t._v("OPTIONS")]),t._v(" 方法发起一个预检请求，以检测实际请求是否可以被服务器所接受。预检请求报文中的 "),s("code",[t._v("Access-Control-Request-Method")]),t._v(" 首部字段告知服务器实际请求所使用的 HTTP 方法；"),s("code",[t._v("Access-Control-Request-Headers")]),t._v(" 首部字段告知服务器实际请求所携带的自定义首部字段。服务器基于从预检请求获得的信息来判断，是否接受接下来的实际请求。")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("OPTIONS /resources/post-here/ HTTP/1.1\nHost: bar.other\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7\nConnection: keep-alive\nOrigin: http://foo.example\nAccess-Control-Request-Method: POST\nAccess-Control-Request-Headers: X-PINGOTHER, Content-Type\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("服务器所返回的 "),s("code",[t._v("Access-Control-Allow-Methods")]),t._v(" 首部字段将所有允许的请求方法告知客户端。该首部字段与 "),s("code",[t._v("Allow")]),t._v(" 类似，"),s("strong",[t._v("但只能用于涉及到 CORS 的场景中。")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("HTTP/1.1 200 OK\nDate: Mon, 01 Dec 2008 01:15:39 GMT\nServer: Apache/2.0.61 (Unix)\nAccess-Control-Allow-Origin: http://foo.example\nAccess-Control-Allow-Methods: POST, GET, OPTIONS\nAccess-Control-Allow-Headers: X-PINGOTHER, Content-Type\nAccess-Control-Max-Age: 86400\nVary: Accept-Encoding, Origin\nContent-Encoding: gzip\nContent-Length: 0\nKeep-Alive: timeout=2, max=100\nConnection: Keep-Alive\nContent-Type: text/plain\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("h2",{attrs:{id:"trace-应该被禁用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#trace-应该被禁用"}},[t._v("#")]),t._v(" TRACE 应该被禁用?")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.it-swarm.cn/zh/http/http-trace%E6%96%B9%E6%B3%95%E6%98%AF%E5%90%A6%E6%98%AF%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E%EF%BC%9F/l958529011/",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP TRACE 方法是否是安全漏洞？"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("最明智的安全原则之一是，"),s("strong",[t._v("应禁用未使用的内容。")])]),t._v(" "),s("p",[t._v("HTTP "),s("code",[t._v("TRACE")]),t._v(" 方法 实现沿通向目标资源的路径的消息环回（loop-back）测试 ，提供了一种实用的 debug 机制。")])])}),[],!1,null,null,null);e.default=_.exports}}]);