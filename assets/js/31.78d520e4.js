(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{508:function(e,t,a){"use strict";a.r(t);var s=a(26),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("ul",[a("li",[a("a",{attrs:{href:"https://stackoverflow.nilmap.com/question?dest_url=https://stackoverflow.com/questions/51233240/how-are-umd-and-commonjs-cjs-package-folders-different-and-which-should-i-use",target:"_blank",rel:"noopener noreferrer"}},[e._v("How are UMD and CommonJS (CJS) package folders different, and which should I use?"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://dev.to/iggredible/what-the-heck-are-cjs-amd-umd-and-esm-ikm",target:"_blank",rel:"noopener noreferrer"}},[e._v("What the heck are CJS, AMD, UMD, and ESM in Javascript?"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://stackoverflow.nilmap.com/question?dest_url=https://stackoverflow.com/questions/15124451/what-is-commonjs-and-why-should-i-care-how-it-can-help-in-writing-js-applicatio",target:"_blank",rel:"noopener noreferrer"}},[e._v("What is CommonJS and why should I care how it can help in writing .js applications?"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://requirejs.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("RequireJS"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chenguangliang/p/5856701.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("js 模块化编程之彻底弄懂 CommonJS 和 AMD/CMD！"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("ES6 之前，JS 一直没有自己的模块体系，这一点对于大型项目的开发很不友好，所以社区出现了 CJS, AMD, UMD, and ESM。。。")]),e._v(" "),a("h2",{attrs:{id:"commonjs-cjs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonjs-cjs"}},[e._v("#")]),e._v(" CommonJS(CJS)")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://javascript.ruanyifeng.com/nodejs/module.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("CommonJS 规范"),a("OutboundLink")],1)])]),e._v(" "),a("hr"),e._v(" "),a("ul",[a("li",[e._v("CJS is short for CommonJS.")]),e._v(" "),a("li",[e._v("CommonJS 原来叫 "),a("strong",[e._v("ServerJS")]),e._v("，后来才改名叫 CommonJS")]),e._v(" "),a("li",[e._v("CommonJS is a popular modularization pattern that's used in Node.js.")]),e._v(" "),a("li",[e._v("用在服务端：模块加载是运行时"),a("strong",[e._v("同步")]),e._v("加载的")]),e._v(" "),a("li",[e._v("用在客户端（浏览器）： 模块需要提前编译打包处理。CJS will not work in the browser. It will have to be transpiled and bundled.")]),e._v(" "),a("li",[e._v("When CJS imports, it will give you a copy of the imported object.")]),e._v(" "),a("li",[e._v("CommonJS 主要用于服务端")])]),e._v(" "),a("blockquote",[a("p",[e._v("From "),a("a",{attrs:{href:"https://www.oreilly.com/library/view/learning-javascript-design/9781449334840/ch11s03.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("CommonJS - Learning JavaScript Design Patterns"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("CommonJS")]),e._v(" "),a("p",[e._v("The CommonJS module proposal specifies a simple API for declaring modules that work outside of the browser (such as on the server). Unlike AMD, it attempts to cover a broader set of concerns such as IO, filesystem, promises, and more.")]),e._v(" "),a("p",[e._v("Originally called "),a("strong",[e._v("ServerJS")]),e._v(" in a project started by Kevin Dangoor back in 2009, the format was more recently formalized by CommonJS, a volunteer working group that aims to design, prototype, and standardize JavaScript APIs. To date, they’ve attempted to ratify standards for both modules and packages.")])]),e._v(" "),a("h3",{attrs:{id:"is-commonjs-suitable-for-the-browser"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#is-commonjs-suitable-for-the-browser"}},[e._v("#")]),e._v(" Is CommonJS Suitable for the Browser?")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.oreilly.com/library/view/learning-javascript-design/9781449334840/ch11s03.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Is CommonJS Suitable for the Browser?"),a("OutboundLink")],1)])]),e._v(" "),a("h3",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[e._v("#")]),e._v(" Example")]),e._v(" "),a("p",[e._v("Node 应用由模块组成，采用 CommonJS 模块规范。")]),e._v(" "),a("p",[e._v("每个文件就是一个模块，有自己的作用域。在一个文件里面定义的变量、函数、类，都是私有的，对其他文件不可见。")]),e._v(" "),a("blockquote",[a("p",[e._v("所有代码都运行在模块作用域，不会污染全局作用域。"),a("br"),e._v("\n模块可以多次加载，但是只会在第一次加载时运行一次，然后运行结果就被缓存了，以后再加载，就直接读取缓存结果。要想让模块再次运行，必须清除缓存。"),a("br"),e._v("\n模块加载的顺序，按照其在代码中出现的顺序。")])]),e._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// package/lib is a dependency we require")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("var")]),e._v(" lib "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'package/lib'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// behaviour for our module")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  lib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'hello world!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// export (expose) foo to other modules")]),e._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" foo\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br")])]),a("h2",{attrs:{id:"amd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#amd"}},[e._v("#")]),e._v(" AMD")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2012/10/asynchronous_module_definition.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Javascript 模块化编程（二）：AMD 规范"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://requirejs.org/docs/whyamd.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("WHY AMD"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/amdjs/amdjs-api/wiki/AMD",target:"_blank",rel:"noopener noreferrer"}},[e._v("Asynchronous Module Definition (AMD) API"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chenguangliang/p/5856701.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("AMD 的 WIKI 中文版"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("AMD stands for Asynchronous Module Definition")]),e._v(" "),a("p",[e._v("很多时候大家希望同一个模块（JavaScript 模块）在不用修改代码的前提下。既可以运行在服务端又可以运行在客户端。")]),e._v(" "),a("p",[e._v("但是 NodeJS 是基于 CommonJS 规范实现的模块化，采用的是同步加载模块的方式。在服务端同步加载 package 速度很快，因为所有的模块都存放在本地硬盘，这没什么问题。但是在浏览器，就是个很麻烦的问题。浏览器需要通过网络请求去加载存放在服务端的模块，很大程度上取决于网速的快慢。会严重影响用户的体验。")]),e._v(" "),a("p",[e._v('因此，浏览器端的模块，不能采用"同步加载"（synchronous），只能采用"异步加载"（asynchronous）。这就是 AMD 规范诞生的背景。')]),e._v(" "),a("p",[e._v("AMD 它采用异步方式加载模块，模块的加载不影响它后面语句的运行。所有依赖这个模块的语句，都定义在一个回调函数中，等到加载完成之后，这个回调函数才会运行。")]),e._v(" "),a("p",[e._v("AMD 也采用 "),a("code",[e._v("require()")]),e._v(" 语句加载模块，但是不同于 CommonJS，它要求两个参数：")]),e._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("目前，主要有两个 Javascript 库实现了 AMD 规范："),a("a",{attrs:{href:"https://requirejs.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("require.js"),a("OutboundLink")],1),e._v(" 和 "),a("a",{attrs:{href:"https://github.com/cujojs/curl",target:"_blank",rel:"noopener noreferrer"}},[e._v("curl.js"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"umd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#umd"}},[e._v("#")]),e._v(" UMD")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/umdjs/umd",target:"_blank",rel:"noopener noreferrer"}},[e._v("umd"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://riptutorial.com/javascript/example/16339/universal-module-definition--umd-",target:"_blank",rel:"noopener noreferrer"}},[e._v("Universal Module Definition (UMD)"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("UMD stands for Universal Module Definition. "),a("strong",[e._v("Works on front and back end")]),e._v(".UMD is usually used as a fallback module when using bundler like Rollup/ Webpack.")]),e._v(" "),a("p",[e._v("The UMD pattern is used when our module needs to be imported by a number of different module loaders (e.g. AMD, CommonJS).")]),e._v(" "),a("p",[e._v("The UMD pattern typically attempts to offer compatibility with the most popular script loaders of the day (e.g RequireJS amongst others). In many cases it uses AMD as a base, with special-casing added to handle CommonJS compatibility.")]),e._v(" "),a("p",[a("strong",[e._v("The pattern is admittedly ugly, but is both AMD and CommonJS compatible, as well as supporting the old-style “global” variable definition.")])]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("/c/wx/sourcecode/fe/react/react-demo/my-app/node_modules/react "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n$ tree\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- LICENSE\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- README.md\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- build-info.json\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- cjs\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- react-jsx-dev-runtime.development.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- react-jsx-dev-runtime.production.min.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- react-jsx-dev-runtime.profiling.min.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- react-jsx-runtime.development.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- react-jsx-runtime.production.min.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- react-jsx-runtime.profiling.min.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- react.development.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- react.production.min.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- index.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- jsx-dev-runtime.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- jsx-runtime.js\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- node_modules\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- package.json\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- umd\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- react.development.js\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- react.production.min.js\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- react.profiling.min.js\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v(" directories, "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("18")]),e._v(" files\n/c/wx/sourcecode/fe/react/react-demo/my-app/node_modules/react "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br"),a("span",{staticClass:"line-number"},[e._v("26")]),a("br"),a("span",{staticClass:"line-number"},[e._v("27")]),a("br")])]),a("h2",{attrs:{id:"cmd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cmd"}},[e._v("#")]),e._v(" CMD")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/cmdjs/specification/blob/master/draft/module.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("CMD 规范"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://seajs.github.io/seajs/docs/",target:"_blank",rel:"noopener noreferrer"}},[e._v("SeaJS"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/seajs/seajs/issues/269",target:"_blank",rel:"noopener noreferrer"}},[e._v("从 CommonJS 到 Sea.js"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("CMD 即 Common Module Definition")]),e._v(" "),a("h2",{attrs:{id:"esm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#esm"}},[e._v("#")]),e._v(" ESM")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://wangdoc.com/es6/module.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Module 的语法"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("ESM stands for ES Modules. It is Javascript's proposal to implement a standard module system.")]),e._v(" "),a("p",[e._v("ECMAScript modules are "),a("a",{attrs:{href:"https://tc39.github.io/ecma262/#sec-modules",target:"_blank",rel:"noopener noreferrer"}},[e._v("the official standard format"),a("OutboundLink")],1),e._v(" to package JavaScript code for reuse.")]),e._v(" "),a("p",[e._v("ECMAScript modules, also known as ESM, is the official standard format to package JavaScript, and fortunately Node.js supports it.")])])}),[],!1,null,null,null);t.default=r.exports}}]);